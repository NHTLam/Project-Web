{% extends "base.html.twig" %}
{% block body %}
    <div class="container-flush col-sm-10 ml-3 mt-3 asm">
        <div class="">
            <h2>List Assignment</h2>
            <form class="form-group" action="{{ path('search_assignment_title') }}" method="post">
                <input class="form-control" type="search" name="keyword" required
                placeholder="Search by assigmemt title">
            </form>
            <div class="form-group mt-3 col-md-6">
            <select onchange="window.location.href=this.value" class="form-control">
                <option>Sort by</option>
                <option value="{{ path('sort_assignment_deadline_ascending')}}">Latest deadline</option>
                <option value="{{ path('sort_assignment_deadline_descending')}}">Earliest deadline</option>
            </select>
            </div>
            <a class="btn btn-success addbtn" href="{{ path('view_feedback')}}">View all feedback</a>
            <a class="btn btn-primary addbtn" href="{{ path('add_assignment')}}">Add new assignment</a>
        </div>
        {% if assignments == null %}
            <h4 class="mess">Assignment not found !</h4>
        {% else %}  
        <table class="table table-hover table-striped mt-5 ">
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Deadline</th>
                    <th>Status Submit</th>
                    <th>Status Feedback</th>
                </tr>
            </thead>
                {% for a in assignments %}
                    <tr>                        
                        <td>
                            <a class="title" href="{{ path('view_assignment_by_id', {'id': a.id}) }}">
                                <b>{{ a.title }}</b>
                            </a>
                        </td>
                        <td>{{ a.deadline | date('d/m/Y') }}</td>
                        <td>
                            {% if a.answer == null %}
                            Not yet
                            {% else %}
                            Submitted
                            {% endif %}
                        </td>
                        <td>
                            {% if a.grade == null %}
                            Not yet
                            {% else %}
                            Feedbacked
                            {% endif %}
                        </td>
                        <td>         
                            <a class="btn btn-warning addbtn" href="{{ path('edit_assignment', {'id': a.id})}}">Edit</a>               
                            <a class="btn btn-danger addbtn" href="{{ path('delete_assignment', {'id': a.id})}}"
                            onclick = "return confirm('Do you want to delete this assigmemt');"
                            >Delete</a>                        
                        </td>
                    </tr>
                {% endfor %}
                    
        </table>
        {% endif %}
    </div>
{% endblock %}